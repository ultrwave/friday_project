(this.webpackJsonpfriday_project=this.webpackJsonpfriday_project||[]).push([[0],{13:function(e,t,r){e.exports={form:"Registration_form__jtTlg",registrationErrorMessage:"Registration_registrationErrorMessage__1kz7v",demoContainer:"Registration_demoContainer__iUtpv"}},15:function(e,t,r){e.exports={profile:"Profile_profile__18LY6"}},16:function(e,t,r){e.exports={inputItem:"SuperInputText_inputItem__3wSqk",superInput:"SuperInputText_superInput__2y9o7",errorInput:"SuperInputText_errorInput__1Tk9e",error:"SuperInputText_error__1l5Oe",inputErrorMessageArea:"SuperInputText_inputErrorMessageArea__1dWI0",title:"SuperInputText_title__2upz8"}},21:function(e,t,r){e.exports={form:"Login_form__32Fyg",rememberMe:"Login_rememberMe__dRVr8"}},22:function(e,t,r){e.exports={form:"Recover_form__DGr-v",timer:"Recover_timer__2fP7Q",timerContainer:"Recover_timerContainer__20gB8"}},30:function(e,t,r){e.exports={default:"SuperButton_default__1H4I9",red:"SuperButton_red__1KP2a"}},31:function(e,t,r){e.exports={activeLink:"NavbarItem_activeLink__3JfRL"}},32:function(e,t,r){e.exports={checkbox:"SuperCheckbox_checkbox__7ru_C",spanClassName:"SuperCheckbox_spanClassName__3VuGm"}},33:function(e,t,r){e.exports={dimScreen:"loader_dimScreen__Ia0cI",loader:"loader_loader__3hg5M"}},43:function(e,t,r){e.exports={App:"App_App__3lkBD",content:"App_content__XgHZo"}},46:function(e,t,r){e.exports={navbar:"Navbar_navbar__2UpRR",navbarItem:"Navbar_navbarItem__34Lgs"}},56:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(23),o=r.n(c),s=(r(56),r(43)),i=r.n(s),l=r(6),u=r(5),d=r(4),j=r(15),b=r.n(j),O=r.p+"static/media/default_avatar.b82381d7.png",p=r(2),h=r(45),m=r.n(h).a.create({withCredentials:!0,baseURL:"https://neko-back.herokuapp.com/2.0",headers:{}}),f=function(){return m.post("/auth/me")},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.post("/auth/login",{email:e,password:t,rememberMe:r})},v=function(){return m.delete("/auth/me")},x=function(e,t,r){return m.post("/auth/forgot",{email:e,from:t,message:r})},_=function(e,t){return m.post("/auth/set-new-password",{password:e,resetPasswordToken:t})},w=function(e,t){return m.post("/auth/register",{email:e,password:t})},C={status:"idle",isInitialized:!1},S="SET-APP-STATUS",N=function(e){return{type:S,status:e}},k={isLoggedIn:!1,profile:null},I=function(e){return{type:"SET-IS-LOGGED-IN",isLoggedIn:e}},T=function(e){return{type:"SET-PROFILE",profile:e}},E=function(){return function(e){e(N("loading")),v().then((function(t){e(I(!1))})).catch((function(e){return console.log("Error: ",Object(p.a)({},e))})).finally((function(){return e(N("idle"))}))}},y=r(0);var R=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(d.c)((function(e){return e.auth})),n=null;return t&&(n=r.profile.data),Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{className:b.a.profile,children:"Profile"}),t?Object(y.jsxs)("div",{className:b.a.profileData,children:[n.avatar?Object(y.jsxs)("div",{children:[Object(y.jsx)("img",{src:n.avatar,alt:"",width:"400",height:"400"}),Object(y.jsx)("div",{className:b.a.avatar,children:n.avatar})]}):Object(y.jsx)("img",{src:O,alt:"",width:"100",height:"100"}),Object(y.jsxs)("div",{className:b.a.name,children:["Name: ",n.name]}),Object(y.jsxs)("div",{className:b.a.email,children:["email: ",n.email]}),Object(y.jsxs)("div",{className:b.a.packsCount,children:["Public card packs count: ",n.publicCardPacksCount]}),Object(y.jsx)("button",{onClick:function(){return e(E())},children:"Log out"})]}):Object(y.jsx)(u.a,{to:"/login"})]})},L=r(9),M=r(18),P=r(30),H=r.n(P),A=function(e){var t=e.red,r=e.className,n=Object(M.a)(e,["red","className"]),a="".concat(t?H.a.red:H.a.default," ").concat(r);return Object(y.jsx)("button",Object(p.a)({className:a},n))},B=r(16),D=r.n(B),F=function(e){var t=e.onChange,r=e.onChangeText,n=e.onKeyPress,a=e.onEnter,c=e.error,o=e.className,s=e.spanClassName,i=e.title,l=Object(M.a)(e,["onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName","title"]),u="".concat(D.a.error," ").concat(s||""),d="".concat(c?D.a.errorInput:D.a.superInput," ").concat(o);return Object(y.jsxs)("div",{className:D.a.inputItem,children:[i&&Object(y.jsx)("div",{className:D.a.title,children:i}),Object(y.jsx)("input",Object(p.a)({onChange:function(e){t&&t(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){n&&n(e),"Enter"===e.key&&a&&a()},className:d},l)),Object(y.jsx)("div",{className:D.a.inputErrorMessageArea,children:c&&Object(y.jsx)("span",{className:u,children:c})})]})},G=r(13),K=r.n(G),U={email:"",password1:"",password2:"",errorResponse:"",successfullyRegistered:!1};var Z=function(){var e=Object(n.useState)(U),t=Object(L.a)(e,2),r=t[0],a=t[1],c=r.email?"":"Field can't be empty",o=r.password1?"":"Field can't be empty",s=r.password2?"":"Field can't be empty",i=function(){c?alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"):w(r.email,r.password1).then((function(e){console.log("User ".concat(e.data.addedUser.email," successfully signed up")),l(!0)})).catch((function(e){a(Object(p.a)(Object(p.a)({},r),{},{errorResponse:e.response.data.error}))}))},l=function(e){a(Object(p.a)(Object(p.a)({},r),{},{successfullyRegistered:e}))};return r.successfullyRegistered?Object(y.jsx)(u.a,{to:"login"}):Object(y.jsxs)("div",{className:K.a.form,children:[Object(y.jsx)("div",{children:"Registration"}),Object(y.jsx)("div",{className:K.a.registrationErrorMessage,children:r.errorResponse}),Object(y.jsxs)("div",{children:[Object(y.jsx)(F,{title:"Email",value:r.email,onChangeText:function(e){a(Object(p.a)(Object(p.a)({},r),{},{email:e,errorResponse:""}))},onEnter:i,error:c,className:K.a.green}),Object(y.jsx)(F,{title:"Password",value:r.password1,onChangeText:function(e){a(Object(p.a)(Object(p.a)({},r),{},{password1:e,errorResponse:""}))},onEnter:i,error:o,className:K.a.green}),Object(y.jsx)(F,{title:"Password confirmation",value:r.password2,onChangeText:function(e){a(Object(p.a)(Object(p.a)({},r),{},{password2:e,errorResponse:""}))},onEnter:i,error:s,className:K.a.green}),Object(y.jsx)(A,{red:!1,onClick:i,children:"Sign up "})]})]})},$=r(46),q=r.n($),z=r(31),V=r.n(z);function J(e){return Object(y.jsx)("div",{className:V.a.item,children:Object(y.jsx)(l.b,{to:e.to,activeClassName:V.a.activeLink,children:e.title})})}function Q(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn}));return Object(y.jsxs)("nav",{className:q.a.navbar,children:[t?Object(y.jsx)("button",{onClick:function(){return e(E())},children:"Logout"}):Object(y.jsx)(J,{to:"/login",title:"Login"}),!t&&Object(y.jsx)(J,{to:"/registration",title:"Registration"}),Object(y.jsx)(J,{to:"/profile",title:"Profile"}),Object(y.jsx)(J,{to:"/password",title:"Password"}),Object(y.jsx)(J,{to:"/recover",title:"Recover Pass"}),Object(y.jsx)(J,{to:"/demo",title:"Demo"})]})}var W=r(32),X=r.n(W),Y=function(e){e.type;var t=e.onChange,r=e.onChangeChecked,n=e.className,a=(e.spanClassName,e.children),c=Object(M.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),o="".concat(X.a.checkbox," ").concat(n||"");return Object(y.jsxs)("label",{children:[Object(y.jsx)("input",Object(p.a)({type:"checkbox",onChange:function(e){t&&t(e),r&&r(e.currentTarget.checked)},className:o},c)),a&&Object(y.jsx)("span",{className:X.a.spanClassName,children:a})]})};var ee=function(){var e=Object(n.useState)(""),t=Object(L.a)(e,2),r=t[0],a=t[1],c=r?"":"Field can't be empty",o=function(){c?alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"):alert(r)},s=Object(n.useState)(!1),i=Object(L.a)(s,2),l=i[0],u=i[1];return Object(y.jsxs)("div",{className:K.a.demoContainer,children:[Object(y.jsx)("h1",{children:"SuperInputs Demo"}),Object(y.jsxs)("div",{children:[Object(y.jsx)(F,{value:r,onChangeText:a,onEnter:o,error:c,className:K.a.green}),Object(y.jsx)(A,{red:""===r,onClick:o,children:"Button "}),Object(y.jsx)(Y,{checked:l,onChangeChecked:u,children:"CheckboxText "})]})]})},te=r(14),re=function(e,t){switch(t){case"email":return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"":"Invalid email";case"password":return/^[a-zA-Z0-9!@#$%^&*]{6,16}$/i.test(e)?"":"Invalid password";default:return""}},ne=r(21),ae=r.n(ne);var ce=function(e){var t=e.formState,r=e.onChangeHandler,n=e.onBlurHandler,a=e.checkBoxHandler,c=e.onSubmitHandler;console.log("Login called");var o=t.email,s=t.password,i=t.rememberMe,u=!!(o.error||s.error||t.globalFormError);return Object(y.jsxs)("form",{className:ae.a.form,children:[Object(y.jsx)("h1",{children:"Sign in"}),Object(y.jsx)(F,{value:o.value,error:o.error,onChangeText:r("email"),onBlur:n("email"),placeholder:"Email",type:"text"}),Object(y.jsx)(F,{value:s.value,error:s.error,onChangeText:r("password"),onBlur:n("password"),placeholder:"Password",type:"password"}),Object(y.jsx)(l.b,{to:"/recover",children:Object(y.jsx)("span",{children:"Forgot password?"})}),Object(y.jsxs)("div",{className:ae.a.rememberMe,children:[Object(y.jsx)(Y,{onChangeChecked:a,checked:i}),Object(y.jsx)("span",{children:"Remember me"})]}),Object(y.jsx)(A,{disabled:u,onClick:function(){c(o.value,s.value,i)},children:"Sign in"}),Object(y.jsx)(l.b,{to:"/registration",children:Object(y.jsx)("span",{children:"Registration"})})]})};var oe=function(){console.log("LoginContainer called");var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(n.useState)({email:{value:"",error:"",touched:!1},password:{value:"",error:"",touched:!1},rememberMe:!1,globalFormError:""}),a=Object(L.a)(r,2),c=a[0],o=a[1];return t?Object(y.jsx)(u.a,{to:"profile"}):Object(y.jsx)(ce,{formState:c,onChangeHandler:function(e){return function(t){o(Object(p.a)(Object(p.a)({},c),{},Object(te.a)({},e,Object(p.a)(Object(p.a)({},c[e]),{},{value:t.trim(),error:c[e].touched?re(t,e):""}))))}},onBlurHandler:function(e){return function(t){o(Object(p.a)(Object(p.a)({},c),{},Object(te.a)({},e,Object(p.a)(Object(p.a)({},c[e]),{},{error:c[e].value?re(t.target.value,e):"Required field",touched:!0}))))}},checkBoxHandler:function(e){o(Object(p.a)(Object(p.a)({},c),{},{rememberMe:e}))},onSubmitHandler:function(t,r,n){e(function(e,t,r){return function(n){n(N("loading")),g(e,t,r).then((function(e){n(T(e)),n(I(!0))})).catch((function(e){return console.log("Error: ",Object(p.a)({},e))})).finally((function(){return n(N("idle"))}))}}(t,r,n))}})},se=r(22),ie=r.n(se),le=r(47),ue=r(48),de=r(51),je=r(50),be=function(e){Object(de.a)(r,e);var t=Object(je.a)(r);function r(e){var n;return Object(le.a)(this,r),(n=t.call(this,e)).timerID=void 0,n.state={timeMs:n.props.getTime()},n}return Object(ue.a)(r,[{key:"componentDidMount",value:function(){var e=this;console.log("RecoverTimer called"),this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"convertMsToTime",value:function(e){var t=e%6e4/1e3;return Math.floor(e/6e4)+":"+(t<10?"0":"")+Math.floor(t)}},{key:"tick",value:function(){this.props.getTime()<0?(clearInterval(this.timerID),this.props.showTimer(!1)):this.setState({timeMs:this.props.getTime()})}},{key:"time",value:function(){return this.state.timeMs>0?this.convertMsToTime(this.state.timeMs):"..."}},{key:"render",value:function(){return Object(y.jsx)("span",{className:ie.a.timer,children:"Time till next link: ".concat(this.time())})}}]),r}(a.a.Component),Oe=function(e){var t=e.formState,r=e.onChangeHandler,a=e.onBlurHandler,c=e.onSubmitHandler,o=e.getTime;console.log("Recover called");var s=Object(n.useState)(!0),i=Object(L.a)(s,2),u=i[0],d=i[1];return Object(y.jsxs)("form",{className:ie.a.form,children:[Object(y.jsx)("h1",{children:"Recover"}),Object(y.jsx)(F,{value:t.value,error:t.error,onChangeText:r,onBlur:a,placeholder:"Email"}),Object(y.jsx)("div",{className:ie.a.timerContainer,children:u?Object(y.jsx)(be,{getTime:o,showTimer:d}):Object(y.jsx)(A,{disabled:!!t.error,onClick:function(){c(t.value),d(!0)},children:"Send"})}),Object(y.jsx)(l.b,{to:"/login",children:Object(y.jsx)("span",{children:"Login page"})})]})},pe={lastLinkTimestamp:0},he=function(e){return{type:"SET-RECOVER-LINK-TIMESTAMP",timeMs:e}};!localStorage.timerData&&localStorage.setItem("timerData","0");var me=function(){console.log("RecoverContainer called");var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(n.useState)({value:"",error:"",touched:!1}),a=Object(L.a)(r,2),c=a[0],o=a[1];return e(he(Number(localStorage.timerData))),t?Object(y.jsx)(Oe,{formState:c,getTime:function(){return Number(localStorage.timerData)+6e3-(new Date).valueOf()},onChangeHandler:function(e){o(Object(p.a)(Object(p.a)({},c),{},{value:e.trim(),error:c.touched?re(e,"email"):""}))},onBlurHandler:function(e){o(Object(p.a)(Object(p.a)({},c),{},{error:c.value?re(e.target.value,"email"):"Required field",touched:!0}))},onSubmitHandler:function(t){e(function(e){return function(t){x(e,"Administrator","<div style=\"background-color: lime; padding: 15px\"> password recovery link:\n         <a href='http://localhost:3000/#/set-new-password/$token$'>link</a></div>").then((function(e){t(he(localStorage.timerData=(new Date).valueOf()))})).catch((function(e){console.log("Recover Error",e)}))}}(t))}}):Object(y.jsx)(u.a,{to:"/login"})},fe=function(e){var t=e.formState,r=e.onChangeHandler,n=e.onBlurHandler,a=e.onSubmitHandler;console.log("NewPassword called");var c=!(!t.password.error&&!t.confirm.error);return Object(y.jsxs)("form",{className:ae.a.form,children:[Object(y.jsx)("h1",{children:"New password"}),Object(y.jsx)(F,{value:t.password.value,error:t.password.error,onChangeText:r("password"),onBlur:n("password"),placeholder:"Enter new password",type:"password"}),Object(y.jsx)(F,{value:t.confirm.value,error:t.confirm.error,onChangeText:r("confirm"),onBlur:n("confirm"),placeholder:"Confirm",type:"password"}),Object(y.jsx)(A,{disabled:c,onClick:function(){a(t.password.value)},children:"Send"}),Object(y.jsx)(l.b,{to:"/login",children:Object(y.jsx)("span",{children:"Login page"})})]})};var ge=function(){console.log("NewPasswordContainer called");var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(u.f)(),a=r.token?r.token:"",c=Object(n.useState)({password:{value:"",error:"",touched:!1},confirm:{value:"",error:"",touched:!1}}),o=Object(L.a)(c,2),s=o[0],i=o[1];return t?Object(y.jsx)(fe,{formState:s,onChangeHandler:function(e){return function(t){i(Object(p.a)(Object(p.a)({},s),{},Object(te.a)({},e,Object(p.a)(Object(p.a)({},s[e]),{},{value:t.trim(),error:s[e].touched?re(t,"password"):""}))))}},onBlurHandler:function(e){return function(t){i(Object(p.a)(Object(p.a)({},s),{},Object(te.a)({},e,Object(p.a)(Object(p.a)({},s[e]),{},{error:s[e].value?re(t.target.value,"password"):"Required field",touched:!0}))))}},onSubmitHandler:function(t){s.password.value!==s.confirm.value?i(Object(p.a)(Object(p.a)({},s),{},{confirm:Object(p.a)(Object(p.a)({},s.confirm),{},{error:"Passwords do not match"})})):e(function(e,t){return function(r){r(N("loading")),_(e,t).then((function(e){r(I(!1))})).catch((function(e){return console.log("Error: ",Object(p.a)({},e))})).finally((function(){return r(N("idle"))}))}}(t,a))}}):Object(y.jsx)(u.a,{to:"/login"})},ve=r(33),xe=r.n(ve),_e=r.p+"static/media/loader.b257f2d9.svg";function we(){return Object(y.jsx)("div",{className:xe.a.dimScreen,children:Object(y.jsx)("img",{className:xe.a.loader,src:_e,alt:"Loading..."})})}var Ce=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.appState.status}));return Object(d.c)((function(e){return e.auth.isLoggedIn})),Object(n.useEffect)((function(){e((function(e){e(N("loading")),f().then((function(t){e(T(t)),e(I(!0))})).catch((function(t){console.log("Error: ",Object(p.a)({},t)),e(I(!1))})).finally((function(){return e(N("idle"))}))}))}),[]),Object(y.jsx)(l.a,{children:Object(y.jsxs)("div",{className:"App",children:["loading"===t&&Object(y.jsx)(we,{}),Object(y.jsx)(Q,{}),Object(y.jsxs)("div",{className:i.a.content,children:[Object(y.jsx)(u.b,{path:"/login",render:function(){return Object(y.jsx)(oe,{})}}),Object(y.jsx)(u.b,{path:"/registration",render:function(){return Object(y.jsx)(Z,{})}}),Object(y.jsx)(u.b,{path:"/profile",render:function(){return Object(y.jsx)(R,{})}}),Object(y.jsx)(u.b,{path:"/recover",render:function(){return Object(y.jsx)(me,{})}}),Object(y.jsx)(u.b,{path:"/password/:token?",render:function(){return Object(y.jsx)(ge,{})}}),Object(y.jsx)(u.b,{path:"/demo",render:function(){return Object(y.jsx)(ee,{})}})]})]})})},Se=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,82)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},Ne=r(19),ke=r(49),Ie={},Te={},Ee={},ye=Object(Ne.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(p.a)(Object(p.a)({},e),{},{status:t.status});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-LOGGED-IN":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:t.isLoggedIn});case"SET-PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});default:return e}},pagePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SOME-ACTION":return Object(p.a)({},e);default:return e}},pageProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SOME-ACTION":return Object(p.a)({},e);default:return e}},pageRecover:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-RECOVER-LINK-TIMESTAMP":return e.lastLinkTimestamp=t.timeMs,e;default:return e}},pageRegistration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SOME-ACTION":return Object(p.a)({},e);default:return e}}}),Re=Object(Ne.d)(ye,Object(Ne.a)(ke.a));window.store=Re;var Le=Re;o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(d.a,{store:Le,children:Object(y.jsx)(Ce,{})})}),document.getElementById("root")),Se()}},[[81,1,2]]]);
//# sourceMappingURL=main.de56dcea.chunk.js.map